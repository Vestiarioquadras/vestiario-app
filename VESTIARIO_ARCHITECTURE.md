# ๐๏ธ Arquitetura do Sistema Vestiรกrio

## ๐ Diagrama de Arquitetura

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                        FRONTEND (React + Ant Design)           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโ โ
โ  โ   Mobile    โ  โ    Web      โ  โ   PWA       โ  โ  Admin  โ โ
โ  โ    App      โ  โ    App      โ  โ             โ  โ  Panel  โ โ
โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                โ
                                โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    API GATEWAY / LOAD BALANCER                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโ โ
โ  โ   Auth      โ  โ   Rate      โ  โ   Logging   โ  โ  Cache  โ โ
โ  โ  Service    โ  โ  Limiting   โ  โ   Service   โ  โ  Layer  โ โ
โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                โ
                                โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      MICROSERVICES                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โ
โ โ   User      โ โ   Booking   โ โ   Payment   โ โ  Equipment  โ โ
โ โ  Service    โ โ   Service   โ โ   Service   โ โ   Service   โ โ
โ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โ
โ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โ
โ โ  Rating     โ โ  Chat       โ โ  Notificationโ โ   Maps      โ โ
โ โ  Service    โ โ  Service    โ โ   Service   โ โ   Service   โ โ
โ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                โ
                                โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      DATA LAYER                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โ
โ โ PostgreSQL  โ โ    Redis    โ โ   MongoDB   โ โ   S3/CDN    โ โ
โ โ (Main DB)   โ โ   (Cache)   โ โ  (Chat/Logs)โ โ (Files)     โ โ
โ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                โ
                                โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    EXTERNAL SERVICES                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โ
โ โ   Google    โ โ   Stripe    โ โ  Firebase   โ โ   SendGrid  โ โ
โ โ    Maps     โ โ PagSeguro   โ โ (Push Notif)โ โ   (Email)   โ โ
โ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐๏ธ Esquema do Banco de Dados

### Tabelas Principais

#### Users (Usuรกrios)
```sql
CREATE TABLE users (
    id UUID PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    name VARCHAR(255) NOT NULL,
    phone VARCHAR(20),
    role ENUM('player', 'club_owner', 'trainer', 'admin') NOT NULL,
    profile_picture_url VARCHAR(500),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### Sports (Esportes)
```sql
CREATE TABLE sports (
    id UUID PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    description TEXT,
    min_players INTEGER NOT NULL,
    max_players INTEGER NOT NULL,
    icon_url VARCHAR(500),
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### Clubs (Clubes)
```sql
CREATE TABLE clubs (
    id UUID PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    address TEXT NOT NULL,
    latitude DECIMAL(10, 8),
    longitude DECIMAL(11, 8),
    phone VARCHAR(20),
    email VARCHAR(255),
    website VARCHAR(500),
    owner_id UUID REFERENCES users(id),
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### Courts (Quadras)
```sql
CREATE TABLE courts (
    id UUID PRIMARY KEY,
    club_id UUID REFERENCES clubs(id),
    name VARCHAR(255) NOT NULL,
    sport_id UUID REFERENCES sports(id),
    capacity INTEGER NOT NULL,
    hourly_rate DECIMAL(10, 2) NOT NULL,
    is_indoor BOOLEAN DEFAULT false,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### Bookings (Reservas)
```sql
CREATE TABLE bookings (
    id UUID PRIMARY KEY,
    court_id UUID REFERENCES courts(id),
    user_id UUID REFERENCES users(id),
    start_time TIMESTAMP NOT NULL,
    end_time TIMESTAMP NOT NULL,
    total_price DECIMAL(10, 2) NOT NULL,
    status ENUM('pending', 'confirmed', 'cancelled', 'completed') DEFAULT 'pending',
    payment_status ENUM('pending', 'paid', 'refunded') DEFAULT 'pending',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### Player_Ratings (Avaliaรงรตes de Jogadores)
```sql
CREATE TABLE player_ratings (
    id UUID PRIMARY KEY,
    player_id UUID REFERENCES users(id),
    sport_id UUID REFERENCES sports(id),
    rating DECIMAL(3, 2) NOT NULL,
    games_played INTEGER DEFAULT 0,
    wins INTEGER DEFAULT 0,
    losses INTEGER DEFAULT 0,
    last_updated TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### Equipment (Equipamentos/Uniformes)
```sql
CREATE TABLE equipment (
    id UUID PRIMARY KEY,
    club_id UUID REFERENCES clubs(id),
    name VARCHAR(255) NOT NULL,
    type ENUM('uniform', 'ball', 'racket', 'other') NOT NULL,
    size VARCHAR(50),
    color VARCHAR(50),
    condition ENUM('excellent', 'good', 'fair', 'poor') DEFAULT 'good',
    is_available BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### Equipment_Loans (Emprรฉstimos de Equipamentos)
```sql
CREATE TABLE equipment_loans (
    id UUID PRIMARY KEY,
    equipment_id UUID REFERENCES equipment(id),
    user_id UUID REFERENCES users(id),
    loan_date TIMESTAMP NOT NULL,
    return_date TIMESTAMP,
    status ENUM('active', 'returned', 'overdue') DEFAULT 'active',
    notes TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## ๐ Fluxos Principais

### 1. Fluxo de Reserva de Quadra
```
Usuรกrio โ Busca Quadras โ Seleciona Horรกrio โ Confirma Reserva โ Pagamento โ Confirmaรงรฃo
```

### 2. Fluxo de Busca de Partidas
```
Usuรกrio โ Define Critรฉrios โ Busca Partidas โ Solicita Participaรงรฃo โ Confirmaรงรฃo โ Jogo
```

### 3. Fluxo de Gestรฃo de Uniformes
```
Clube โ Cadastra Equipamentos โ Usuรกrio Solicita โ Emprรฉstimo โ Devoluรงรฃo โ Avaliaรงรฃo
```

## ๐ Tecnologias Recomendadas

### Frontend
- **React 18** com TypeScript
- **Ant Design** (jรก implementado)
- **React Query** para cache de dados
- **React Router** para navegaรงรฃo
- **PWA** com Workbox

### Backend
- **Node.js** com Express ou **Python** com FastAPI
- **TypeScript** para type safety
- **JWT** para autenticaรงรฃo
- **Bcrypt** para hash de senhas
- **Joi** ou **Zod** para validaรงรฃo

### Banco de Dados
- **PostgreSQL** como banco principal
- **Redis** para cache e sessรตes
- **MongoDB** para logs e chat
- **Prisma** ou **TypeORM** como ORM

### Infraestrutura
- **Docker** para containerizaรงรฃo
- **AWS** ou **Google Cloud** para hospedagem
- **Nginx** como reverse proxy
- **PM2** para gerenciamento de processos

### Integraรงรตes
- **Google Maps API** para localizaรงรฃo
- **Stripe/PagSeguro** para pagamentos
- **Firebase** para notificaรงรตes push
- **SendGrid** para emails
- **Cloudinary** para imagens

## ๐ Mรฉtricas e Analytics

### KPIs Principais
- **Usuรกrios Ativos Mensais (MAU)**
- **Reservas por Mรชs**
- **Receita por Reserva (ARR)**
- **Taxa de Retenรงรฃo**
- **NPS (Net Promoter Score)**

### Mรฉtricas Tรฉcnicas
- **Tempo de Resposta da API**
- **Uptime do Sistema**
- **Taxa de Erro**
- **Performance do Frontend**

---

*Esta arquitetura foi projetada para escalar e suportar milhares de usuรกrios simultรขneos, mantendo alta performance e confiabilidade.*

